namespace Day03
{
    internal class Program
    {
        static void Main(string[] args)
        {
            string input = ".......497...........................858...923...128..................227..801........487.....664...........................................\r\n436........765..............140.......+....................859.............*.........+.................960........668.......................\r\n...*982...........=..........=....203......266.263...375*....=...402....691..-....................*..........575....................13......\r\n.............114...588...............*............*......631........*.......952...463..14.......661..........=...706......*333.........595..\r\n...194.........*..............743...917.&......375.....................................*...............544*.......*....664..................\r\n...*.....807..452....81..........*......969..#......309*................/....873....941...828.197..........427.728...............566...13...\r\n.243........*.....80.......329....470.......145.475.....111........*659..259....+........*....%........569..............%.....*....*....*...\r\n.........130......*....385*............123......................199.......................640.....463..%.........978....920...266..380.83...\r\n.....323........870.........+...........$.........466......453........................297...........*............*..........................\r\n........*.=..............588.....*786......$.........*........*.......390*.....886...*....227...728..852.......606....*863.......916..396...\r\n.....538...287................301........133.....539..........33.537......466..$...793..+..........*...............218.....721........*.....\r\n...............986.........=.......................................*...%...............222..-.......701.271...............#.........437.....\r\n......*3.........*.626.68...419...740...........................806...976.......875.........174..............735.............=488...........\r\n...790.........487....*................./532..13............................*....-.....503..........*11..734..........978.19......622.......\r\n...................&....712.68=.619+.........*.......................863...596.....2.....*.......160.....+...&659........*.........-....-757\r\n437*.......#........520...*..........304....568.974.255.318.183.........*.......&.....675......................................849..........\r\n....161.....687.710.....854.............*.......*......*....&...441......891.....476..........616.......$........235..434.880...*..673+.....\r\n..................*...............683.....800.120..............*....807..................................707.....*....-....*...74........562\r\n....@...#988...487..#685..........-......*..............251.146.............................142@....74...........398....769..........238*...\r\n....848....../................-.$.....662.........773..*...........895.......591...........................233..............................\r\n797.........611..........@.186...429..........304*....468.....554....*..........*...960......82.......*810...+.534..660....645...313./......\r\n......239..............509...............720*......................844..939=..508......*...........401............*.......*.......*...649...\r\n........=........158.......$.....=...........200......409....982.....................46................126.....517....303.647.660...........\r\n...530....=......*..........704.69...................*.......*..................@879........589..131.................*........*.............\r\n......*..871...672....................611*........415.......283.569.21....842/........-109.&.......*.......157$...719.......679.$...........\r\n....664..............664......668.........203....................&...%............................14..................427.......833..484....\r\n....................*........*.......434.......796...........65............................................-479.126..*..............+.......\r\n.....382..........121.....836.........*........@...............*789.......624........350&..........*544............$.6.........882....513...\r\n....%.....406.........................848........625...%...88.........382..+..971.................5......*622...........914....*....%.......\r\n..............627....816........641..............*.....373./.............*..../...912..651.162........557........901...&.....503.337....59..\r\n...357...........*.........552...*..816..........240......................636.....*...*.....*.............@..993....*.......................\r\n......*934....961...=..43..*...324.....@...............726.888....370...........170.805...517........639.389....*..929.................953..\r\n.16...............408.*...94..................................*......&..............................*......../...9........605...............\r\n.......571....13......512........591+.......976.......895....489...........751.......474.760.........240.....931............*...............\r\n...464../..................608..............*........*................$.94*........................................486.......172............\r\n...*......121........=.....*.......$......909.......583............128........929...................765.............*............+....24....\r\n.............*.......762....230..422..285.....434......................390.....=.....921.................261....#...949.....382...903.*.....\r\n............595........................*.......*...................833*..............%.......973..$....@...*.268........506*..........251...\r\n967...................................25....234...........................306....281..........=..36..918.432....../406........344...$.......\r\n.....700*610.......=...839......917......33......610@................537....=....@............................%........20.402.@.....926.....\r\n..............%.768...*....................*...@............93..161.%...............74$......%.........96..298..........%..+............+519\r\n...........925.......586...................264..85...721....*...*.............................371.................822.=.....................\r\n...............540...........-....447....................987.....305.............379@.707..............670...397...*..842....552.464........\r\n.....666......*....844....515.......*..............+114..............977...............&...393........*.........$.800...........*...........\r\n.....*...647...696..*..............203....................418.....19............522........*.......462................57...786..........561.\r\n....691.....$.......756...165.....................596.32...%........#..280.259$..........398..............425.............*....719..796.....\r\n.............../.........=........1/..305............*.........451......&..........332.......706............&.......327.841...........*.....\r\n.74..........791.............=........+.....................+...-..................+..........*.....................*...............419..371\r\n...*927..........352.......148..........401....459...+....998......$783........@............444..$.......959..106.366.......................\r\n............190..........*......385.............*....846......................907.826..585.......447.441..*..*............7......871........\r\n.................142....944....$.................634.............587..@..930..........*......935.....*...819.29.....3......*35..............\r\n......967....415*......................=980.....................%....58.-......317..74......../.....922..............-.207........../.......\r\n.........................................................................................................175....................369.233.....\r\n.........................+....645.$........%.....620.+429....951......616.................................*............524$.................\r\n....799...551*602........920..+....503..654....-...*............*....=......395.........451....263.......897..................370...........\r\n......-.......................................409......970....661.............*............+...*....48...................475..$........839..\r\n..97...................../.....@497....%..........446$...*...............533..794.....432-.....167...*.....722...486........*...500...*.....\r\n..............459......540.............110................569............&..................#.....................#........785.*.......455..\r\n........815....*...........................*452......./......................365.........929....*978.=................709........+..84......\r\n....427*......466.............608*796..............680......................*......&.........142.....603.................#......621..*......\r\n.........635............@....................302..................296-.....679...801..290..................464..............980......627....\r\n....../.../........%...850.......*108....513*........656...*739........715...............@.......713.......*...................*............\r\n354+..245.......629...........995.....................$..41.....=.....@.....................45..........840......506+...$.....148...........\r\n..........995.................................&541............914.510.....950...../...........*53..28...................275........138......\r\n.............*812..665...../.........................101.308..............*......691.482.............*........902.585.......@.......*.......\r\n.........../........./...292...............#..........-....*....@307......661..........*.210......135....932%...........992..54..191..931...\r\n...400..649...............................504.196.........88........................581.............................743*.............&......\r\n...*.........140..............642....891.............309...............................................695......361..............603........\r\n....170.643#..*.................*....*.......*24.....*....................932.291.....538....461.........*........*..275............&.......\r\n.............725......494......23...279...713..../....449............*........*...../...=......*..........434..............785..............\r\n.....991..........946.............................830.........136.439.24...519......289.......408...579........708.650*......*.370.13....410\r\n......*..887........#..688.673.........218......................-...............941....................$.......%.......927.722....*.........\r\n....124....*...........*..../....427....*.............312................................................922...........................307..\r\n...........706...16..934..*.......*......608....459..&..........761.....................647..641...........*.............242............*...\r\n..5*715..-........+........122.....262........./...........928....%............728..610*......*..502.....222..40.....923..+...........540...\r\n.........701.............=..............291...............*.........351.........*............141.%............*.../.....*....725............\r\n..............314.......878....%.......*......=..820*.....988..204.....-.....889......119............797...........395....+.............287.\r\n..................671........322....101......257.....733........@.....................=.............*..........544......600.......862.......\r\n..421.......582...%..............................484...............565.....+...831...........695...384.#...592.=............240....../.904..\r\n....*..........*........570...........&....=........*629......717&.*.......93......726../961....*......535..*........767../......715....*...\r\n....439.....630............../..%...615...912......................777............*..............602.........567..3........107....$..77.....\r\n....................914.....3...2.=.............763...&885......................185....182.......................*......-......+............\r\n...372...383........*..............60.............*............&..38.681...............*.....459....../........117...504......358..480-.....\r\n............+.990..33...........................834.......@..33......................494....*........181.66+................................\r\n...............*......*...492..............176..........857...........376.315................954.....................*982.......763.........\r\n329=..........179....245...*...61...........*...*................%......+....*.....352*509.........952#..69..620..423.............*.........\r\n.........................131.....*17......191.33.306...../.....144..503......491.............................................298...415......\r\n...................$...................................426.........*...............526.669.....&498..698...$............447.....+...........\r\n.............575...142.617......890..............%...............212..730.519.971..&......*384.........@....18.219.........*................\r\n.......*537..*.........*........*.........677...587..407...120*........./....*...................................+......334..........700....\r\n....944......636..848........743.....388..*....................109..........................................................540.40..*.......\r\n.................*....596............*....155..324...820.520.................=...............443...94...........621.276......*..+..910......\r\n...............276.....-.........376...........*........*....................739......368....=..............428....*......434..........878..\r\n932....28.....................-..=....207......959....................289.........196.*........................*...............-.......=....\r\n...*........................172....#.#.....688.........25..944...725...&............*..110.....148...426.483..771../932......800............\r\n.947............................457....931*.............-....*...#.......834......721.........*.........*.............................477...\r\n.....*491......*.........*114.................191.....$...213........909*...................194............633....%...792..605.633...#......\r\n.............108......611.....+719...........*.....696........865...............120................=724...%....950.../......*...../.........\r\n...320............*.................260/...121.........338...*........719.180.........516.....*.............................649.............\r\n.....#...643.......941......*160......................*......140...94....*...............*..39.789................*......&.........81...597.\r\n............*..135.......532.................%90...608............*............+515....743.............+...194.993.669..259..+..............\r\n.....%....948.....*............262..695.712....................623.....*...................473........602...*...............83......679.....\r\n..259.............447.............%.*...............363.............105...................@........=......+.........................*.......\r\n......957....659........299..........................%...599..898.+.................464.......606.237..768..416@....=...............228.....\r\n.376..$.........*..........*..2.........@557......./.......*.*.....517..........859*.........*....................855...877.427.........*...\r\n.........*468..535......500....$................117......726.381........428...$................@........43....472.......*...*...........476.\r\n......517................................951........%............-..249..@.....920...........859........*........*....825.393...15..........\r\n...........770.......&16.....278...417......$.....626...-23....954.....#..............................868.......502............*............\r\n.....373..*...................%...*.....254................................................246.#530....................982....179....635....\r\n......*...538.....................362...-...........162.........................180=........*..................278.......*............+.....\r\n....138.......922..............................543................6....12....&.............92...150...............*.......994...............\r\n................+.....+................388....*..........................*....788............../..................220.............834.......\r\n.....................301.593.597.............500..603......928....966................/.............536.......768.............800............\r\n................*64........*.../..&.....924.........*........-...$....................203.............-...+..../...............*..423.&451..\r\n.............453....*......638.....314..*...896....459...............96...................186............581................846....*........\r\n....&188.........624.400...............268....@...........................664...............*...12.943............#733......................\r\n.............................597...765................388......149..468.....+............698......*....143........................426.......\r\n.......................878...*.........875..............*..871*.....*..............929....................$.504*..............473.%.........\r\n...245..........94.651..*.....915.........*.........40.440........236.................*511.45........994........753..................887....\r\n...#..............*.....459............212...18*964.*.........=71..........768..827............./.....*......................567............\r\n.....787.2..781*....................................827....................*...*..............437.....813.......317.....102.....*333........\r\n..........*.....285............@..-...........304.......821.622.....953...377.997......320....................@./.....%....*..........254...\r\n.......877..636.....42......772..419.....189..*................&....*.....................=.17......366*....563......228...153..............\r\n...............*.....$................&....*...839......218.........449......................*..409.....69............................652...\r\n.....576......255..............593...397............469..%......#.......+568.......374......499....*...........541..477.........%137..*.....\r\n.......*............@319.................$.35..........*.....207...............808*.................933.737...........*.502............367..\r\n.....807....219../.....................436......226@...266........215...................................*...................................\r\n..............*...769.....41*....922............................$..*.......271.........350..........677.346......................662....725.\r\n..............175............979.*...#........215..............652..39......$....=61......*..154...................................*........\r\n...426..............335*.........487.194.........*42...................790.............+.750.@......&..............253...337....617..717....\r\n...+....908.............489.................../............14...278.../....953.......316.......*856.44.50...../.......*................$....\r\n.........%..90.................437..........848...........................*......714........708..........*223.588.....884....871.801........\r\n494@..........*..33...........*.........779.....424.550....923............779.......*...340........738.......................*....*..131.603\r\n.....50..481.........=.....643...........@......%............*.......815......681..263....*........*...5.....256*11.377$....872.903.*.......\r\n.....*...............635.......698..........583...148........708........................323.243..201.....................*..........377.132.\r\n...502........883............/..*..............$...*....994.........*....479@.................$......804.443..........584...................\r\n.............*..............893..581..534........376..+..........174.119.........138............670...*....$.834............4...............\r\n.....+....234...904.323..=..............&.894..........439.@838............*.....*........47........555........*............*........932....\r\n...594............*...$.654.....+.........*........................84.*....7...231.$102.......286.......*760....817.......719.........*.....\r\n..................620............806......866.................559......440...........................310...........................590..547.";
            string demo = "467..114..\r\n...*......\r\n..35..633.\r\n......#...\r\n617*......\r\n.....+.58.\r\n..592.....\r\n......755.\r\n...$.*....\r\n.664.598..";

            string[] lines = input.Split("\r\n");

            long partsSum = 0;
            double gearTotal = 0;

            string numbers = "0123456789";
            string symbols = "+*=-&#/%$@";

            Dictionary<int[], List<NumberObject>> gearDictionary = new Dictionary<int[], List<NumberObject>>();
            List<int[]> symbolLocations = new List<int[]>();

            int y = 0;

            foreach (string line in lines)
            {
                int x = 0;
                foreach (char c in line)
                {
                    if (c == '*')
                    {
                        symbolLocations.Add(new int[] { x, y });
                        gearDictionary.Add(new int[] { x, y }, new List<NumberObject>());
                    }
                    x++;
                }

                y++;
            }

            void bordersGearSymbol(int x, int y, NumberObject numberObject)
            {
                for (int i = -1; i < 2; i++)
                {

                    for (int j = -1; j < 2; j++)
                    {
                        if (j != 0 || i != 0)
                        {
                            try
                            {
                                if (lines[y + j][x + i] == '*')
                                {
                                    var list = gearDictionary.First(q => q.Key[0] == x + i && q.Key[1] == y + j).Value;
                                    list.Add(numberObject);
                                }
                            }
                            catch { }
                        }
                    }


                }

            }


            for (int i = 0; i < lines.Length; i++)
            {
                for (int j = 0; j < lines[0].Length; j++)
                {
                    bool isNumber = false;
                    string number = "";
                    bool adjacent = false;
                    NumberObject numberObject = new NumberObject();

                    do
                    {
                        if (numbers.Contains(lines[i][j]))
                        {

                            isNumber = true;
                            numberObject.chars.Add(lines[i][j]);

                            bordersGearSymbol(j, i, numberObject);

                            j++;
                        }
                        else
                        {
                            isNumber = false;
                        }

                    } while (isNumber && j < lines[i].Length);
                }
            }

            foreach (var gearSymbol in gearDictionary)
            {
                if (gearSymbol.Value.Count > 1)
                {
                        List<NumberObject> list = new List<NumberObject>();
                    foreach (var line in gearSymbol.Value)
                    {
                        if (!list.Contains(line))
                        {
                            list.Add(line);
                        }
                    }
                    if (list.Count == 2)
                    {
                        string temp = "";

                        foreach (var c in list[0].chars)
                        {
                            temp += c;
                        }
                        double nr1 = Convert.ToDouble(temp);
                        Console.WriteLine(nr1);


                        temp = "";

                        foreach (var c in list[1].chars)
                        {
                            temp += c;
                        }

                        double nr2 = Convert.ToDouble(temp);
                        Console.WriteLine(nr2);

                        gearTotal += nr1 * nr2;
                    }
                }
            }




            Console.WriteLine(gearTotal);

        }
        public void Part1()
        {
            string input = ".......497...........................858...923...128..................227..801........487.....664...........................................\r\n436........765..............140.......+....................859.............*.........+.................960........668.......................\r\n...*982...........=..........=....203......266.263...375*....=...402....691..-....................*..........575....................13......\r\n.............114...588...............*............*......631........*.......952...463..14.......661..........=...706......*333.........595..\r\n...194.........*..............743...917.&......375.....................................*...............544*.......*....664..................\r\n...*.....807..452....81..........*......969..#......309*................/....873....941...828.197..........427.728...............566...13...\r\n.243........*.....80.......329....470.......145.475.....111........*659..259....+........*....%........569..............%.....*....*....*...\r\n.........130......*....385*............123......................199.......................640.....463..%.........978....920...266..380.83...\r\n.....323........870.........+...........$.........466......453........................297...........*............*..........................\r\n........*.=..............588.....*786......$.........*........*.......390*.....886...*....227...728..852.......606....*863.......916..396...\r\n.....538...287................301........133.....539..........33.537......466..$...793..+..........*...............218.....721........*.....\r\n...............986.........=.......................................*...%...............222..-.......701.271...............#.........437.....\r\n......*3.........*.626.68...419...740...........................806...976.......875.........174..............735.............=488...........\r\n...790.........487....*................./532..13............................*....-.....503..........*11..734..........978.19......622.......\r\n...................&....712.68=.619+.........*.......................863...596.....2.....*.......160.....+...&659........*.........-....-757\r\n437*.......#........520...*..........304....568.974.255.318.183.........*.......&.....675......................................849..........\r\n....161.....687.710.....854.............*.......*......*....&...441......891.....476..........616.......$........235..434.880...*..673+.....\r\n..................*...............683.....800.120..............*....807..................................707.....*....-....*...74........562\r\n....@...#988...487..#685..........-......*..............251.146.............................142@....74...........398....769..........238*...\r\n....848....../................-.$.....662.........773..*...........895.......591...........................233..............................\r\n797.........611..........@.186...429..........304*....468.....554....*..........*...960......82.......*810...+.534..660....645...313./......\r\n......239..............509...............720*......................844..939=..508......*...........401............*.......*.......*...649...\r\n........=........158.......$.....=...........200......409....982.....................46................126.....517....303.647.660...........\r\n...530....=......*..........704.69...................*.......*..................@879........589..131.................*........*.............\r\n......*..871...672....................611*........415.......283.569.21....842/........-109.&.......*.......157$...719.......679.$...........\r\n....664..............664......668.........203....................&...%............................14..................427.......833..484....\r\n....................*........*.......434.......796...........65............................................-479.126..*..............+.......\r\n.....382..........121.....836.........*........@...............*789.......624........350&..........*544............$.6.........882....513...\r\n....%.....406.........................848........625...%...88.........382..+..971.................5......*622...........914....*....%.......\r\n..............627....816........641..............*.....373./.............*..../...912..651.162........557........901...&.....503.337....59..\r\n...357...........*.........552...*..816..........240......................636.....*...*.....*.............@..993....*.......................\r\n......*934....961...=..43..*...324.....@...............726.888....370...........170.805...517........639.389....*..929.................953..\r\n.16...............408.*...94..................................*......&..............................*......../...9........605...............\r\n.......571....13......512........591+.......976.......895....489...........751.......474.760.........240.....931............*...............\r\n...464../..................608..............*........*................$.94*........................................486.......172............\r\n...*......121........=.....*.......$......909.......583............128........929...................765.............*............+....24....\r\n.............*.......762....230..422..285.....434......................390.....=.....921.................261....#...949.....382...903.*.....\r\n............595........................*.......*...................833*..............%.......973..$....@...*.268........506*..........251...\r\n967...................................25....234...........................306....281..........=..36..918.432....../406........344...$.......\r\n.....700*610.......=...839......917......33......610@................537....=....@............................%........20.402.@.....926.....\r\n..............%.768...*....................*...@............93..161.%...............74$......%.........96..298..........%..+............+519\r\n...........925.......586...................264..85...721....*...*.............................371.................822.=.....................\r\n...............540...........-....447....................987.....305.............379@.707..............670...397...*..842....552.464........\r\n.....666......*....844....515.......*..............+114..............977...............&...393........*.........$.800...........*...........\r\n.....*...647...696..*..............203....................418.....19............522........*.......462................57...786..........561.\r\n....691.....$.......756...165.....................596.32...%........#..280.259$..........398..............425.............*....719..796.....\r\n.............../.........=........1/..305............*.........451......&..........332.......706............&.......327.841...........*.....\r\n.74..........791.............=........+.....................+...-..................+..........*.....................*...............419..371\r\n...*927..........352.......148..........401....459...+....998......$783........@............444..$.......959..106.366.......................\r\n............190..........*......385.............*....846......................907.826..585.......447.441..*..*............7......871........\r\n.................142....944....$.................634.............587..@..930..........*......935.....*...819.29.....3......*35..............\r\n......967....415*......................=980.....................%....58.-......317..74......../.....922..............-.207........../.......\r\n.........................................................................................................175....................369.233.....\r\n.........................+....645.$........%.....620.+429....951......616.................................*............524$.................\r\n....799...551*602........920..+....503..654....-...*............*....=......395.........451....263.......897..................370...........\r\n......-.......................................409......970....661.............*............+...*....48...................475..$........839..\r\n..97...................../.....@497....%..........446$...*...............533..794.....432-.....167...*.....722...486........*...500...*.....\r\n..............459......540.............110................569............&..................#.....................#........785.*.......455..\r\n........815....*...........................*452......./......................365.........929....*978.=................709........+..84......\r\n....427*......466.............608*796..............680......................*......&.........142.....603.................#......621..*......\r\n.........635............@....................302..................296-.....679...801..290..................464..............980......627....\r\n....../.../........%...850.......*108....513*........656...*739........715...............@.......713.......*...................*............\r\n354+..245.......629...........995.....................$..41.....=.....@.....................45..........840......506+...$.....148...........\r\n..........995.................................&541............914.510.....950...../...........*53..28...................275........138......\r\n.............*812..665...../.........................101.308..............*......691.482.............*........902.585.......@.......*.......\r\n.........../........./...292...............#..........-....*....@307......661..........*.210......135....932%...........992..54..191..931...\r\n...400..649...............................504.196.........88........................581.............................743*.............&......\r\n...*.........140..............642....891.............309...............................................695......361..............603........\r\n....170.643#..*.................*....*.......*24.....*....................932.291.....538....461.........*........*..275............&.......\r\n.............725......494......23...279...713..../....449............*........*...../...=......*..........434..............785..............\r\n.....991..........946.............................830.........136.439.24...519......289.......408...579........708.650*......*.370.13....410\r\n......*..887........#..688.673.........218......................-...............941....................$.......%.......927.722....*.........\r\n....124....*...........*..../....427....*.............312................................................922...........................307..\r\n...........706...16..934..*.......*......608....459..&..........761.....................647..641...........*.............242............*...\r\n..5*715..-........+........122.....262........./...........928....%............728..610*......*..502.....222..40.....923..+...........540...\r\n.........701.............=..............291...............*.........351.........*............141.%............*.../.....*....725............\r\n..............314.......878....%.......*......=..820*.....988..204.....-.....889......119............797...........395....+.............287.\r\n..................671........322....101......257.....733........@.....................=.............*..........544......600.......862.......\r\n..421.......582...%..............................484...............565.....+...831...........695...384.#...592.=............240....../.904..\r\n....*..........*........570...........&....=........*629......717&.*.......93......726../961....*......535..*........767../......715....*...\r\n....439.....630............../..%...615...912......................777............*..............602.........567..3........107....$..77.....\r\n....................914.....3...2.=.............763...&885......................185....182.......................*......-......+............\r\n...372...383........*..............60.............*............&..38.681...............*.....459....../........117...504......358..480-.....\r\n............+.990..33...........................834.......@..33......................494....*........181.66+................................\r\n...............*......*...492..............176..........857...........376.315................954.....................*982.......763.........\r\n329=..........179....245...*...61...........*...*................%......+....*.....352*509.........952#..69..620..423.............*.........\r\n.........................131.....*17......191.33.306...../.....144..503......491.............................................298...415......\r\n...................$...................................426.........*...............526.669.....&498..698...$............447.....+...........\r\n.............575...142.617......890..............%...............212..730.519.971..&......*384.........@....18.219.........*................\r\n.......*537..*.........*........*.........677...587..407...120*........./....*...................................+......334..........700....\r\n....944......636..848........743.....388..*....................109..........................................................540.40..*.......\r\n.................*....596............*....155..324...820.520.................=...............443...94...........621.276......*..+..910......\r\n...............276.....-.........376...........*........*....................739......368....=..............428....*......434..........878..\r\n932....28.....................-..=....207......959....................289.........196.*........................*...............-.......=....\r\n...*........................172....#.#.....688.........25..944...725...&............*..110.....148...426.483..771../932......800............\r\n.947............................457....931*.............-....*...#.......834......721.........*.........*.............................477...\r\n.....*491......*.........*114.................191.....$...213........909*...................194............633....%...792..605.633...#......\r\n.............108......611.....+719...........*.....696........865...............120................=724...%....950.../......*...../.........\r\n...320............*.................260/...121.........338...*........719.180.........516.....*.............................649.............\r\n.....#...643.......941......*160......................*......140...94....*...............*..39.789................*......&.........81...597.\r\n............*..135.......532.................%90...608............*............+515....743.............+...194.993.669..259..+..............\r\n.....%....948.....*............262..695.712....................623.....*...................473........602...*...............83......679.....\r\n..259.............447.............%.*...............363.............105...................@........=......+.........................*.......\r\n......957....659........299..........................%...599..898.+.................464.......606.237..768..416@....=...............228.....\r\n.376..$.........*..........*..2.........@557......./.......*.*.....517..........859*.........*....................855...877.427.........*...\r\n.........*468..535......500....$................117......726.381........428...$................@........43....472.......*...*...........476.\r\n......517................................951........%............-..249..@.....920...........859........*........*....825.393...15..........\r\n...........770.......&16.....278...417......$.....626...-23....954.....#..............................868.......502............*............\r\n.....373..*...................%...*.....254................................................246.#530....................982....179....635....\r\n......*...538.....................362...-...........162.........................180=........*..................278.......*............+.....\r\n....138.......922..............................543................6....12....&.............92...150...............*.......994...............\r\n................+.....+................388....*..........................*....788............../..................220.............834.......\r\n.....................301.593.597.............500..603......928....966................/.............536.......768.............800............\r\n................*64........*.../..&.....924.........*........-...$....................203.............-...+..../...............*..423.&451..\r\n.............453....*......638.....314..*...896....459...............96...................186............581................846....*........\r\n....&188.........624.400...............268....@...........................664...............*...12.943............#733......................\r\n.............................597...765................388......149..468.....+............698......*....143........................426.......\r\n.......................878...*.........875..............*..871*.....*..............929....................$.504*..............473.%.........\r\n...245..........94.651..*.....915.........*.........40.440........236.................*511.45........994........753..................887....\r\n...#..............*.....459............212...18*964.*.........=71..........768..827............./.....*......................567............\r\n.....787.2..781*....................................827....................*...*..............437.....813.......317.....102.....*333........\r\n..........*.....285............@..-...........304.......821.622.....953...377.997......320....................@./.....%....*..........254...\r\n.......877..636.....42......772..419.....189..*................&....*.....................=.17......366*....563......228...153..............\r\n...............*.....$................&....*...839......218.........449......................*..409.....69............................652...\r\n.....576......255..............593...397............469..%......#.......+568.......374......499....*...........541..477.........%137..*.....\r\n.......*............@319.................$.35..........*.....207...............808*.................933.737...........*.502............367..\r\n.....807....219../.....................436......226@...266........215...................................*...................................\r\n..............*...769.....41*....922............................$..*.......271.........350..........677.346......................662....725.\r\n..............175............979.*...#........215..............652..39......$....=61......*..154...................................*........\r\n...426..............335*.........487.194.........*42...................790.............+.750.@......&..............253...337....617..717....\r\n...+....908.............489.................../............14...278.../....953.......316.......*856.44.50...../.......*................$....\r\n.........%..90.................437..........848...........................*......714........708..........*223.588.....884....871.801........\r\n494@..........*..33...........*.........779.....424.550....923............779.......*...340........738.......................*....*..131.603\r\n.....50..481.........=.....643...........@......%............*.......815......681..263....*........*...5.....256*11.377$....872.903.*.......\r\n.....*...............635.......698..........583...148........708........................323.243..201.....................*..........377.132.\r\n...502........883............/..*..............$...*....994.........*....479@.................$......804.443..........584...................\r\n.............*..............893..581..534........376..+..........174.119.........138............670...*....$.834............4...............\r\n.....+....234...904.323..=..............&.894..........439.@838............*.....*........47........555........*............*........932....\r\n...594............*...$.654.....+.........*........................84.*....7...231.$102.......286.......*760....817.......719.........*.....\r\n..................620............806......866.................559......440...........................310...........................590..547.";
            string demo = "467..114..\r\n...*......\r\n..35..633.\r\n......#...\r\n617*......\r\n.....+.58.\r\n..592.....\r\n......755.\r\n...$.*....\r\n.664.598..";

            string[] lines = input.Split("\r\n");

            long partsSum = 0;

            string numbers = "0123456789";
            string symbols = "+*=-&#/%$@";

            List<int[]> symbolLocations = new List<int[]>();

            int y = 0;

            foreach (string line in lines)
            {
                int x = 0;
                foreach (char c in line)
                {
                    if (c != '.' && !numbers.Contains(c))
                    {
                        symbolLocations.Add(new int[] { x, y });
                        if (!symbols.Contains(c))
                        {
                            symbols += c;
                        }
                    }
                    x++;
                }

                y++;
            }



            bool findsymbol(int x, int y)
            {


                for (int i = -1; i < 2; i++)
                {

                    for (int j = -1; j < 2; j++)
                    {
                        if (j != 0 || i != 0)
                        {
                            try
                            {
                                if (symbols.Contains(lines[y + j][x + i]))
                                {
                                    return true;
                                }
                            }
                            catch { }
                        }
                    }


                }
                return false;

            }


            for (int i = 0; i < lines.Length; i++)
            {
                for (int j = 0; j < lines[i].Length; j++)
                {
                    bool isNumber = false;
                    string number = "";
                    bool adjacent = false;

                    do
                    {
                        if (numbers.Contains(lines[i][j]))
                        {
                            isNumber = true;
                            number += lines[i][j];

                            if (!adjacent && findsymbol(j, i))
                            {
                                adjacent = true;
                            }
                            j++;
                        }
                        else
                        {
                            if (number.Length > 0 && adjacent)
                            {
                                partsSum += Convert.ToInt32(number);
                            }

                            isNumber = false;
                        }

                    } while (isNumber && j < lines[i].Length);





                    //if(number.Length > 0)
                    //{
                    //    bool adjacent = false;
                    //    bool firstPass = true;
                    //    for (int k = j - number.Length-1; k < j + 1; k++)
                    //    {

                    //        if (firstPass)
                    //        {
                    //            if (k > -1 && lines[i][k] != '.')
                    //            {
                    //                adjacent = true;
                    //                break;
                    //            }
                    //            if (j+1 < lines[0].Length && lines[i][j+1] != '.' && !numbers.Contains(lines[i][j + 1]))
                    //            {
                    //                adjacent = true;
                    //                break;
                    //            }


                    //            firstPass = false;
                    //        }

                    //        if (k == -1)
                    //        {
                    //            k++;
                    //        }
                    //        else if (k == lines[0].Length)
                    //        {
                    //            break;
                    //        }
                    //        else
                    //        {
                    //            if (i - 1 > -1 && i + 1 < lines.Length)
                    //            {
                    //                if (lines[i - 1][k] != '.' && !number.Contains(lines[i + 1][k]))
                    //                {
                    //                    adjacent = true;
                    //                    break;
                    //                }
                    //                if (lines[i + 1][k] != '.' && !number.Contains(lines[i + 1][k]))
                    //                {
                    //                    adjacent = true;
                    //                    break;
                    //                }
                    //            }

                    //        }

                    //    }

                    //    if (!adjacent)
                    //    {
                    //        partsSum += Convert.ToInt32(number);
                    //        adjacent = false;
                    //    }


                    //}

                }


            }




            // 538293 is to low part 1
            // 540131
            Console.WriteLine(partsSum);
        }
        
    }
}
